# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json

version: 2
final_space: true

palette:
  black: black
  red: red
  green: green
  yellow: yellow
  blue: blue
  magenta: magenta
  cyan: cyan
  white: white
  foreground: p:white
  background: transparent

blocks:
  - type: prompt
    alignment: left
    newline: true
    segments:
      - type: text
        style: plain
        template: ╭─
      - type: os
        style: plain
        foreground: p:white
        template: " {{ if .WSL }}WSL at {{ end }}{{.Icon}} ⋮ "
      - type: session
        style: plain
        foreground: p:white
        template: "{{ if .SSHSession }}  {{ end }}{{ if .Root }}<p:red></> {{ end }}{{ .UserName }}{{ if .SSHSession }}@{{ .HostName }}{{ end }} "

  - type: prompt
    alignment: right
    filler: ─
    segments:
      - type: kubectl
        style: powerline
        powerline_symbol: ─
        invert_powerline: true
        foreground: p:white
        template: " 󱃾 {{.Context}}{{if .Namespace}} :: {{.Namespace}}{{end}} "
      - type: project
        style: powerline
        powerline_symbol: ─
        invert_powerline: true
        foreground: p:white
      - type: node
        style: powerline
        powerline_symbol: ─
        invert_powerline: true
        foreground: p:white
        template: "  {{ .Full }} "
        properties:
          fetch_package_manager: true
          display_mode: context
      - type: python
        style: powerline
        powerline_symbol: ─
        invert_powerline: true
        foreground: p:white
        template: "  {{ .Full }} "
        properties:
          display_mode: context
          fetch_version: true
          fetch_virtual_env: true
      - type: dotnet
        style: powerline
        powerline_symbol: ─
        invert_powerline: true
        foreground: p:white
        template: "  {{ .Full }} "
        properties:
          display_mode: context
      - type: java
        style: powerline
        powerline_symbol: ─
        invert_powerline: true
        foreground: p:white
        template: "  {{ .Full }}"
        properties:
          display_mode: context
      - type: text
        style: plain
        template: ╮

  - type: prompt
    alignment: left
    newline: true
    segments:
      - type: text
        style: plain
        template: "│ "
      - type: path
        style: plain
        foreground: p:white
        template: " {{ .Path }} "
        properties:
          folder_separator_icon: /
          home_icon: " "
          style: full
          mapped_locations:
            "~/source": " "

  - type: prompt
    alignment: right
    segments:
      - type: time
        style: plain
        foreground: p:white
        template: " {{ .CurrentDate | date .Format }}"
        properties:
          time_format: "15:04"
      - type: text
        style: plain
        template: " ─╯"

  - type: prompt
    alignment: left
    newline: true
    segments:
      - type: text
        style: plain
        template: ╰─
      - type: status
        style: plain
        foreground: p:red
        template: "{{ if .Error }}✘{{ end }}"
      - type: text
        style: plain
        foreground: "p:white"
        template: 

  - type: rprompt
    alignment: right
    segments:
      - type: git
        style: plain
        foreground: p:white
        template: " {{ .UpstreamIcon }} {{ .HEAD }}{{if .BranchStatus }} {{ .BranchStatus }}{{ end }}{{ if .Working.Changed }}  {{ .Working.String }}{{ end }}{{ if and (.Working.Changed) (.Staging.Changed) }} |{{ end }}{{ if .Staging.Changed }}  {{ .Staging.String }}{{ end }}{{ if gt .StashCount 0 }}  {{ .StashCount }}{{ end }} "
        properties:
          fetch_upstream_icon: true
          fetch_status: true
          branch_icon: " "
          github_icon: 

transient_prompt:
  foreground: p:cyan
  template: "\n──   {{ now | date \"15:04\" }} ── {{ .PWD }} ──\n"
